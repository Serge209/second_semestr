Устройства

Символьные устрйства
1. Устройства реализующие последовательный поток данных , байт за байтом
2. Имеют всего одну позицию - текущую
3. Невозможно обратиться к случайным данным
4. Примеры - клавиатура

Блочные устройства

Если устройство позволяет обращаться к данным случайным образом, то это блочное устройство

Блочные устройства чувствительные к производительности 

Должны иметь возможность предоставлять доступ по любому адресу в устройстве

Сектор и блок

Сектор - наименьший адресуемый элемент блочного устройства

Стандартный размер - 512 байт, сейчас 4кб

Устройство не может работать с элементом данных размером менее сектора 

Для ядра и ПО минимально адресуемая единица данных для блочного устройства - блок 

Размер сектора кратен размеру блока (512б, 1кб, 4кб)

Размер блока  не больше размера страницы памяти


Очередь запросов

Файловая система отправляет запросы к устройству в очередь 

Очередь содержит список запросов на ввод и вывод и управляющую информацию

Пока очередь не пуста, драйвер устройства извлекает запросы из очереди и отправляет на блочное устройство

Файловые системы

Файловая система -способ отображения физических данных в файлы.

Задачи файловой системы:

1. Отображение логического представления файлов на физическое 

реализация пользовательского интерфейса для доступа к файлам

упорядочивание файлов

защита данных в случае аппаратного сбоя

реализация контроля доступа к файлам

Иурархия файловой системы

В Windows иерархия файловой системы начинается с имени логического диска 

В linux иерархия файловой системы представляет единое дерево 



Абсолютные и относительные пути к файлу 

Имена файлов и директорий регистрозависимы. Файлы Temp.txt и temp.txt - это разные файлы

Абсолютный путь  к файлу - путь от корня файловой системы.

Относительный путь - путь от некорневого каталога 

Основные элементы файловой системы: inode

Индексный дескриптор содержит метаанные файлах
Типы файлов:
Обычные(txt) - 

Директории - d

Ссылки(Мягкие и жесткие) - l

Сокеты - s

Каналы - p

inod не содержит имя файла, данные файла

Прерывания. Планировщик процессов

Сигналы - способ оповестить процесс о наступлении события. Используются для управления процессами и межпроцессного взаимодействия 

Каждый сигнал имееет обработчик по умолчанию и действие по умолчанию.

Сигналы можно игнорить, кроме SIGKILL И SIGSTOP

Прерывание - событие, требующие немедленной реакции со стороны процессора

Прерывания

Аппаратные

поступают от устройств в любой момент времени

Программные 

Возникают при выполнении программы, синхронно

Маскируемы

Обычно связаны с аппаратными сбоями

Плаировщик процессов 

Планировщик - компонент ядра, который определяет следующий процесс на выполнение 
Планировщик определяет из списка готовых к выполнению задач наиболее подходящую 
Процессы, не готовые к выполнению блокируются ,  использя ядро 

Вытеснение процесса 

Linux - oc с вытесняющей многозадачностью

Процесс A выполняется

Процесс B переходит в статус 'готов к выполнению'

Ядр обнаруживает, что B имеет приоретет больше , чем A





